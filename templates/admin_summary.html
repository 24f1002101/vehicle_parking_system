{% extends 'base.html' %}
{% block title %}
    Admin Summary
{% endblock %}
{% block content %}
<style>
   
    @import url('https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css');

    
    body {
        background-color: #f0f2f5; 
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        color: #333;
    }

   
    .container.my-4 {
        padding: 0 15px; 
    }

    .table th, .table td {
        white-space: nowrap; 
        padding: 0.75rem 1rem; 
    }


    @media (max-width: 576px) {
        .table-responsive {
            margin-left: -15px;
            margin-right: -15px;
            width: calc(100% + 30px);
        }
    }
    .no-data-message {
        text-align: center;
        padding: 30px;
        font-size: 1.2em;
        color: #777;
    }
</style>

<div class="container my-4"> {# Bootstrap container for layout #}
    {% with messages = get_flashed_messages() %}
        {% if messages %}
            <div class="alert alert-info" role="alert"> {# Bootstrap alert for flash messages #}
                {% for message in messages %}
                    <div>{{ message }}</div>
                {% endfor %}
            </div>
        {% endif %}
    {% endwith %}

    <center><h2 class="mb-4">Parking Lot Summary</h2> </center>{# Bootstrap heading with margin-bottom #}

    {% if utilizing and utilized and cost and cor %}
        <div class="table-responsive"> {# Bootstrap class for responsive tables #}
            <table class="table table-striped table-hover table-bordered align-middle"> {# Bootstrap table classes #}
                <thead class="table-dark"> {# Dark header for table #}
                    <tr>
                        <th scope="col">Lot Id</th>
                        <th scope="col">Lot Location</th>
                        <th scope="col">Lot Address</th>
                        <th scope="col">Pincode</th>
                        <th scope="col">Price of Spot</th>
                        <th scope="col">No.of Occupied Spots </th>
                        <th scope="col">No.of Empty Spots </th>
                        <th scope="col">No.of Persons Utilizing</th>
                        <th scope="col">No.of Persons Utilized</th>
                        <th scope="col">Total Cost Generated</th>
                        <th scope="col">Customer Occupancy Rate</th>
                    </tr>
                </thead>
                <tbody>
                {% for i in utilizing %} {# Assuming 'utilizing' is the primary loop as it contains the Parkinglot objects #}
                    <tr>
                        <td>{{ i.lot_id }}</td>
                        <td>{{ i.location }}</td>
                        <td>{{ i.address }}</td>
                        <td>{{ i.pincode }}</td>
                        <td>₹{{ i.price }}</td> 
                        <td>{{ occupied[i] }}</td>
                        <td>{{ available[i] }}</td>
                        <td>{{ utilizing[i] }}</td> 
                        <td>{{ utilized[i] }}</td> 
                        <td>₹{{ cost[i] | round(2) }}</td> 
                        <td>{{ cor[i] | round(2) }}%</td> 
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    {% else %}
        <p class="no-data-message">No summary data available yet. Please ensure there are parking activities.</p>
    {% endif %}

    {# Go Back Button styled with Bootstrap #}
    <div class="text-center mt-4"> {# Center the button with margin-top #}
        <a href="{{ url_for('display') }}" class="btn btn-primary btn-lg">Go Back</a> {# Bootstrap primary button #}
    </div>
</div>
{% endblock %}